# <!-- this_file: .ide-setup-guide.md -->
# IDE Setup Guide for Vexy Stax JS

Complete setup instructions for popular development environments with recommended extensions, configurations, and productivity tips.

---

## Table of Contents

1. [Visual Studio Code](#visual-studio-code)
2. [JetBrains IDEs](#jetbrains-ides-webstorm-intellij)
3. [Vim/Neovim](#vimneovim)
4. [Common Setup](#common-setup-all-ides)
5. [Troubleshooting](#troubleshooting)

---

## Visual Studio Code

### Required Extensions

Install these essential extensions for optimal development experience:

```bash
# Essential extensions
code --install-extension dbaeumer.vscode-eslint
code --install-extension esbenp.prettier-vscode
code --install-extension ms-vscode.vscode-node-debug2
code --install-extension orta.vscode-jest

# Recommended extensions
code --install-extension eamodio.gitlens
code --install-extension streetsidesoftware.code-spell-checker
code --install-extension wayou.vscode-todo-highlight
code --install-extension mhutchie.git-graph
```

### Extension Details

**Essential**:
- **ESLint** (dbaeumer.vscode-eslint) - JavaScript/TypeScript linting
- **Prettier** (esbenp.prettier-vscode) - Code formatting (respects .editorconfig)
- **Node.js Debugger** (ms-vscode.vscode-node-debug2) - Debug tests and builds
- **Jest Runner** (orta.vscode-jest) - Run individual tests in IDE

**Recommended**:
- **GitLens** (eamodio.gitlens) - Enhanced git integration
- **Code Spell Checker** (streetsidesoftware.code-spell-checker) - Catch typos in comments/docs
- **TODO Highlight** (wayou.vscode-todo-highlight) - Highlight TODO/FIXME comments
- **Git Graph** (mhutchie.git-graph) - Visualize git history

### Workspace Settings

Create `.vscode/settings.json` with project-specific configuration:

```json
{
  "editor.formatOnSave": true,
  "editor.defaultFormatter": "esbenp.prettier-vscode",
  "editor.tabSize": 4,
  "editor.insertSpaces": true,
  "editor.rulers": [80, 120],
  "files.trimTrailingWhitespace": true,
  "files.insertFinalNewline": true,
  "files.eol": "\n",

  "[javascript]": {
    "editor.tabSize": 4,
    "editor.defaultFormatter": "esbenp.prettier-vscode"
  },

  "[json]": {
    "editor.tabSize": 2
  },

  "[markdown]": {
    "editor.tabSize": 2,
    "files.trimTrailingWhitespace": false
  },

  "javascript.validate.enable": true,
  "javascript.updateImportsOnFileMove.enabled": "always",

  "search.exclude": {
    "**/node_modules": true,
    "**/coverage": true,
    "**/docs": true,
    "**/*.bak": true
  },

  "files.watcherExclude": {
    "**/node_modules/**": true,
    "**/coverage/**": true,
    "**/docs/**": true
  },

  "npm.enableScriptExplorer": true,
  "npm.scriptExplorerAction": "run"
}
```

### Launch Configuration

Create `.vscode/launch.json` for debugging:

```json
{
  "version": "0.2.0",
  "configurations": [
    {
      "type": "node",
      "request": "launch",
      "name": "Run All Tests",
      "runtimeExecutable": "npm",
      "runtimeArgs": ["run", "test:unit"],
      "console": "integratedTerminal",
      "internalConsoleOptions": "neverOpen"
    },
    {
      "type": "node",
      "request": "launch",
      "name": "Run Current Test File",
      "program": "${workspaceFolder}/node_modules/.bin/node",
      "args": ["--test", "${file}"],
      "console": "integratedTerminal",
      "skipFiles": ["<node_internals>/**"]
    },
    {
      "type": "node",
      "request": "launch",
      "name": "Dev Server",
      "runtimeExecutable": "npm",
      "runtimeArgs": ["run", "dev"],
      "console": "integratedTerminal",
      "internalConsoleOptions": "neverOpen"
    }
  ]
}
```

### Tasks Configuration

Create `.vscode/tasks.json` for quick commands:

```json
{
  "version": "2.0.0",
  "tasks": [
    {
      "label": "Build",
      "type": "npm",
      "script": "build",
      "group": {
        "kind": "build",
        "isDefault": true
      },
      "problemMatcher": []
    },
    {
      "label": "Test",
      "type": "npm",
      "script": "test:unit",
      "group": {
        "kind": "test",
        "isDefault": true
      },
      "problemMatcher": []
    },
    {
      "label": "Coverage",
      "type": "npm",
      "script": "test:coverage",
      "problemMatcher": []
    }
  ]
}
```

### Keyboard Shortcuts

Recommended shortcuts (add to `keybindings.json`):

```json
[
  {
    "key": "cmd+shift+t",
    "command": "workbench.action.tasks.runTask",
    "args": "Test"
  },
  {
    "key": "cmd+shift+b",
    "command": "workbench.action.tasks.build"
  }
]
```

### Productivity Tips

1. **Quick Test Execution**: Right-click any test file → "Run Code" to run single test
2. **Integrated Terminal**: Use `Ctrl+`` to toggle terminal for npm commands
3. **Git Integration**: Stage changes with `Cmd+K Cmd+S`, commit with `Cmd+K Cmd+Enter`
4. **Search Project**: `Cmd+Shift+F` for project-wide search (respects .gitignore)
5. **Command Palette**: `Cmd+Shift+P` for all commands (npm scripts, git operations)

---

## JetBrains IDEs (WebStorm, IntelliJ)

### Initial Setup

1. **Open Project**: File → Open → Select `vexy-stax-js` directory
2. **Enable EditorConfig**: Settings → Editor → Code Style → Enable EditorConfig support
3. **Set Node.js**: Settings → Languages & Frameworks → Node.js → Point to Node.js 18+
4. **Enable npm Scripts**: View → Tool Windows → npm

### Code Style Configuration

WebStorm automatically detects `.editorconfig`, but verify:

**Settings → Editor → Code Style → JavaScript**:
- Tab size: 4
- Indent: 4
- Continuation indent: 4
- Use tab character: ✗ (unchecked)

**Settings → Editor → Code Style → JSON**:
- Tab size: 2

### Run Configurations

**Add npm Run Configurations** (Run → Edit Configurations):

1. **Dev Server**:
   - Name: "Dev Server"
   - Scripts: `dev`
   - Node interpreter: Project Node.js

2. **Run Tests**:
   - Name: "Run All Tests"
   - Scripts: `test:unit`
   - Node interpreter: Project Node.js

3. **Coverage**:
   - Name: "Test Coverage"
   - Scripts: `test:coverage`
   - Node interpreter: Project Node.js

4. **Build**:
   - Name: "Build Production"
   - Scripts: `build`
   - Node interpreter: Project Node.js

### Testing Integration

**Node.js Test Runner**:
- WebStorm automatically detects Node.js test runner
- Right-click any `*.test.js` file → Run 'filename.test.js'
- View test results in integrated test panel
- Rerun failed tests with single click

**Coverage Integration**:
- Run → Run 'Test Coverage' with Coverage
- View coverage report in editor gutter (green/red highlights)
- Coverage tool window shows statistics by file

### Version Control

**Git Integration**:
- Commit: `Cmd+K` (opens commit dialog)
- Push: `Cmd+Shift+K`
- Update Project: `Cmd+T`
- Show History: `Alt+9` (Version Control tool window)
- Annotate (blame): Right-click in gutter → Annotate with Git Blame

**Recommended Git Settings**:
- Settings → Version Control → Commit
  - ✓ Use non-modal commit interface
  - ✓ Analyze code before commit
  - ✓ Check TODO
  - ✓ Perform code cleanup

### Productivity Tips

1. **Quick Fix**: `Alt+Enter` on any warning/error for suggestions
2. **Search Everywhere**: Double `Shift` for files, symbols, actions
3. **Refactor**: `Ctrl+T` for refactoring menu (rename, extract, inline)
4. **Terminal**: `Alt+F12` for integrated terminal
5. **npm Scripts**: `Alt+7` for npm tool window with one-click script execution
6. **Recent Files**: `Cmd+E` to quickly switch between recent files
7. **Structure**: `Cmd+F12` to see file structure (functions, classes)

### Plugins (Optional)

Recommended plugins from JetBrains Marketplace:

- **GitToolBox** - Enhanced git integration
- **String Manipulation** - Case conversion, sorting
- **Rainbow Brackets** - Color-code bracket pairs
- **.ignore** - Enhanced .gitignore support

---

## Vim/Neovim

### Required Plugins

Using [vim-plug](https://github.com/junegunn/vim-plug):

```vim
" .vimrc or init.vim

call plug#begin('~/.vim/plugged')

" Essential
Plug 'neoclide/coc.nvim', {'branch': 'release'}  " LSP client
Plug 'editorconfig/editorconfig-vim'              " EditorConfig support
Plug 'tpope/vim-fugitive'                         " Git integration
Plug 'airblade/vim-gitgutter'                     " Git diff in gutter

" Recommended
Plug 'junegunn/fzf', { 'do': { -> fzf#install() } }
Plug 'junegunn/fzf.vim'                           " Fuzzy finder
Plug 'preservim/nerdtree'                         " File explorer
Plug 'vim-test/vim-test'                          " Test runner
Plug 'dense-analysis/ale'                         " Linting

call plug#end()
```

### CoC (Conquer of Completion) Setup

Install CoC extensions for JavaScript development:

```vim
:CocInstall coc-json coc-tsserver coc-eslint coc-prettier
```

**CoC Configuration** (`:CocConfig`):

```json
{
  "suggest.autoTrigger": "always",
  "suggest.minTriggerInputLength": 2,
  "diagnostic.checkCurrentLine": true,
  "eslint.autoFixOnSave": true,
  "prettier.formatterPriority": 1,
  "coc.preferences.formatOnSaveFiletypes": [
    "javascript",
    "json",
    "markdown"
  ]
}
```

### Vim Configuration

Add to `.vimrc` or `init.vim`:

```vim
" General settings
set number relativenumber
set tabstop=4 shiftwidth=4 expandtab
set autoindent smartindent
set wildmenu wildmode=longest:full,full
set ignorecase smartcase
set incsearch hlsearch

" EditorConfig (automatically loaded by plugin)
let g:EditorConfig_exclude_patterns = ['fugitive://.*']

" NERDTree
map <C-n> :NERDTreeToggle<CR>
let NERDTreeIgnore = ['node_modules', 'coverage', 'docs', '.git']

" FZF
nnoremap <C-p> :Files<CR>
nnoremap <C-f> :Rg<CR>
nnoremap <C-b> :Buffers<CR>

" vim-test
nmap <silent> <leader>t :TestNearest<CR>
nmap <silent> <leader>T :TestFile<CR>
nmap <silent> <leader>a :TestSuite<CR>
let test#javascript#runner = 'nodetest'

" Git (vim-fugitive)
nnoremap <leader>gs :Git status<CR>
nnoremap <leader>gc :Git commit<CR>
nnoremap <leader>gp :Git push<CR>
nnoremap <leader>gl :Git log --oneline --graph --decorate<CR>

" CoC mappings
nmap <silent> gd <Plug>(coc-definition)
nmap <silent> gy <Plug>(coc-type-definition)
nmap <silent> gi <Plug>(coc-implementation)
nmap <silent> gr <Plug>(coc-references)
nnoremap <silent> K :call CocAction('doHover')<CR>

" Use <Tab> for trigger completion
inoremap <silent><expr> <Tab> pumvisible() ? "\<C-n>" : "\<Tab>"
inoremap <silent><expr> <S-Tab> pumvisible() ? "\<C-p>" : "\<S-Tab>"
```

### Quick Commands

Create shell aliases for common npm tasks:

```bash
# Add to ~/.bashrc or ~/.zshrc
alias vst='npm run test:unit'
alias vsc='npm run test:coverage'
alias vsb='npm run build'
alias vsd='npm run dev'
alias vsa='npm run audit:deps'
```

### Workflow Tips

1. **File Navigation**:
   - `Ctrl+p` - Fuzzy find files
   - `Ctrl+f` - Search in files (ripgrep)
   - `Ctrl+b` - Switch buffers
   - `Ctrl+n` - Toggle file tree

2. **Testing**:
   - `,t` - Run test under cursor
   - `,T` - Run all tests in current file
   - `,a` - Run entire test suite

3. **Git Operations**:
   - `,gs` - Git status
   - `,gc` - Git commit
   - `,gp` - Git push
   - `,gl` - Git log graph

4. **Code Navigation** (CoC):
   - `gd` - Go to definition
   - `gr` - Find references
   - `K` - Show documentation hover
   - `Tab` - Trigger autocomplete

---

## Common Setup (All IDEs)

### Node.js Version Management

Ensure Node.js 18+ is installed (see `.nvmrc`):

```bash
# Using nvm
nvm install 18
nvm use 18

# Using asdf
asdf install nodejs 18.0.0
asdf local nodejs 18.0.0

# Verify version
node --version  # Should show v18.x.x or higher
```

### Install Dependencies

```bash
npm ci  # Clean install from package-lock.json
```

### Verify Setup

Run these commands to verify everything works:

```bash
# Run tests
npm run test:unit
# Expected: 223/223 tests passing

# Check coverage
npm run test:coverage
# Expected: 96%+ on core modules

# Build project
npm run build
# Expected: docs/ folder with assets

# Dev server
npm run dev
# Expected: http://localhost:5173
```

### Git Configuration

Configure git to use the commit template:

```bash
# Set commit template
git config commit.template .gitmessage

# Verify
git config --get commit.template
# Expected: .gitmessage
```

### EditorConfig

All IDEs should automatically detect `.editorconfig`:

- Charset: UTF-8
- Line endings: LF
- Indent: 4 spaces (JavaScript), 2 spaces (JSON/YAML/CSS)
- Trim trailing whitespace: Yes
- Insert final newline: Yes

**Verify**:
- Open any `.js` file
- Check status bar shows "Spaces: 4" (or equivalent)
- Check line endings show "LF"

---

## Troubleshooting

### Issue: Tests Not Running

**Symptoms**: `npm run test:unit` fails or hangs

**Solutions**:
1. Verify Node.js version: `node --version` (must be >=18.0.0)
2. Clean install dependencies: `rm -rf node_modules package-lock.json && npm install`
3. Check for port conflicts if dev server fails
4. Verify file permissions: `ls -la tests/`

### Issue: EditorConfig Not Working

**Symptoms**: Wrong indentation, CRLF line endings

**Solutions**:

**VSCode**:
```bash
# Install EditorConfig extension
code --install-extension EditorConfig.EditorConfig

# Verify in settings
code --list-extensions | grep EditorConfig
```

**WebStorm**:
- Settings → Editor → Code Style → Enable EditorConfig support ✓

**Vim**:
```vim
" Verify plugin installed
:PlugStatus
" Should show editorconfig-vim installed

" Reload plugins if needed
:PlugInstall
```

### Issue: Git Line Ending Warnings

**Symptoms**: Git warns about CRLF/LF conversions

**Solution**:
```bash
# Configure git to use LF (matches .gitattributes)
git config core.autocrlf input  # Mac/Linux
git config core.autocrlf true   # Windows

# Normalize existing files
git add --renormalize .
```

### Issue: Coverage Reports Not Generating

**Symptoms**: `npm run test:coverage` succeeds but no HTML report

**Solutions**:
1. Check c8 is installed: `npm ls c8`
2. Verify coverage/ directory exists and is writable
3. Clear old coverage: `npm run clean && npm run test:coverage`
4. Open HTML report: `open coverage/index.html` (Mac) or `xdg-open coverage/index.html` (Linux)

### Issue: ESLint/Prettier Conflicts

**Symptoms**: Formatting keeps changing back

**Solutions**:
1. Ensure Prettier respects EditorConfig:
   - VSCode: "editor.defaultFormatter": "esbenp.prettier-vscode"
   - WebStorm: Settings → Prettier → "On save"
2. Disable competing formatters (e.g., Beautify, JS-CSS-HTML Formatter)
3. Check for conflicting .prettierrc files (project uses .editorconfig only)

### Issue: Slow IDE Performance

**Symptoms**: IDE lags, high CPU usage

**Solutions**:
1. Exclude large directories from indexing:
   - `node_modules/`
   - `coverage/`
   - `docs/`
   - `.git/`
2. Increase IDE memory (WebStorm):
   - Help → Edit Custom VM Options
   - Add: `-Xmx4096m` (4GB heap)
3. Disable unnecessary plugins/extensions
4. Close unused tool windows (npm, git, structure)

### Issue: Debugger Not Attaching

**Symptoms**: Breakpoints not hit, debugger shows "disconnected"

**Solutions**:

**VSCode**:
1. Verify launch.json has correct Node.js path
2. Check `"skipFiles": ["<node_internals>/**"]` is set
3. Try: View → Command Palette → "Debug: Restart"

**WebStorm**:
1. Run → Edit Configurations → Verify Node interpreter path
2. Try: Run → Debugging Actions → Force Step Into
3. Check firewall isn't blocking debugger port

---

## Additional Resources

### Project Documentation
- [CONTRIBUTING.md](CONTRIBUTING.md) - Contribution guidelines
- [.onboarding-guide.md](.onboarding-guide.md) - First-time contributor setup
- [.testing-guide.md](.testing-guide.md) - Writing and running tests
- [.troubleshooting.md](.troubleshooting.md) - Common issues

### IDE Documentation
- [VSCode JavaScript](https://code.visualstudio.com/docs/languages/javascript)
- [WebStorm Guide](https://www.jetbrains.com/help/webstorm/)
- [Vim JavaScript](https://github.com/neoclide/coc.nvim/wiki)

### Tools
- [EditorConfig](https://editorconfig.org/)
- [Node.js Test Runner](https://nodejs.org/api/test.html)
- [c8 Coverage](https://github.com/bcoe/c8)

---

**Last Updated**: 2025-11-05 (Iteration 66)
