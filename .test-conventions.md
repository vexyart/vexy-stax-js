# <!-- this_file: .test-conventions.md -->
# Test Suite Conventions

## Import Patterns

Test files use different import patterns based on test structure complexity:

### Pattern 1: Simple Tests (`import test`)
**Usage**: Single-level tests without grouping
**Count**: 7 files
**Examples**:
- core_app_state.test.js
- core_constants.test.js
- core_event_bus.test.js
- core_ordering.test.js
- core_shared_state.test.js
- core_studio_sizing.test.js
- utils_logger.test.js

```javascript
import test from 'node:test';

test('description', () => {
  // test code
});
```

### Pattern 2: Simple Tests with Destructuring (`import { test }`)
**Usage**: Same as Pattern 1, but with explicit destructuring
**Count**: 3 files
**Examples**:
- error_message_consistency.test.js
- scene_managers.test.js
- utils_helpers.test.js

```javascript
import { test } from 'node:test';

test('description', () => {
  // test code
});
```

### Pattern 3: Grouped Tests (`describe` + `test`)
**Usage**: Tests organized into logical groups/suites
**Count**: 3 files
**Examples**:
- camera_animation.test.js
- constants_immutability.test.js
- error_recovery.test.js

```javascript
import { describe, test } from 'node:test';

describe('Group Name', () => {
  test('description', () => {
    // test code
  });
});
```

### Pattern 4: Grouped Tests with BDD Style (`describe` + `it`)
**Usage**: BDD-style tests using 'it' instead of 'test'
**Count**: 2 files
**Examples**:
- api_input_validation.test.js
- integration_cross_module.test.js

```javascript
import { describe, it } from 'node:test';

describe('Feature Name', () => {
  it('should do something', () => {
    // test code
  });
});
```

### Pattern 5: Complex Tests with Lifecycle Hooks
**Usage**: Tests requiring setup/teardown or mocking
**Count**: 1 file
**Example**:
- core_render_loop.test.js

```javascript
import { describe, it, beforeEach, afterEach, mock, before } from 'node:test';

describe('RenderLoop', () => {
  beforeEach(() => {
    // setup
  });

  it('should do something', () => {
    // test code
  });

  afterEach(() => {
    // cleanup
  });
});
```

## Pattern Selection Guidelines

1. **Use Pattern 1 or 2** for simple, independent tests
2. **Use Pattern 3** when tests share a common theme and benefit from grouping
3. **Use Pattern 4** for integration tests or BDD-style specifications
4. **Use Pattern 5** when tests require setup/teardown, mocking, or lifecycle management

## Consistency Notes

- All patterns follow Node.js test runner best practices
- Variation is intentional and appropriate based on test complexity
- `test` vs `it` naming is stylistic preference (both valid)
- Destructuring (`import { test }` vs `import test`) is equivalent

## Last Updated
2025-11-05 (Iteration 59)
